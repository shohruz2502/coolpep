<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coolpep - –†–æ—Ç –∑–∞–∫—Ä—ã—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background: #f5f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —á–∞—Ç–∞ */
        .chat-header {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .back-button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #333;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .back-button:hover {
            background: rgba(0,0,0,0.05);
        }
        
        .community-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            background: linear-gradient(135deg, #ff4757 0%, #ff6b6b 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: 600;
        }
        
        .chat-info {
            flex: 1;
        }
        
        .chat-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }
        
        .chat-status {
            font-size: 13px;
            color: #ff4757;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .online-count {
            color: #4cd964;
            font-weight: 500;
        }
        
        .muted-badge-large {
            background: #ff4757;
            color: white;
            font-size: 10px;
            padding: 3px 10px;
            border-radius: 10px;
            margin-left: 5px;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
        }
        
        .header-action {
            font-size: 20px;
            color: #333;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .header-action:hover {
            background: rgba(0,0,0,0.05);
        }
        
        /* –ë–∞–Ω–Ω–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
        .mute-banner {
            background: linear-gradient(135deg, #ff4757 0%, #ff6b6b 100%);
            color: white;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .mute-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .mute-title {
            font-weight: 600;
            font-size: 18px;
        }
        
        .mute-reason {
            font-size: 14px;
            opacity: 0.9;
            max-width: 400px;
            line-height: 1.5;
        }
        
        .mute-details {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 10px;
        }
        
        .appeal-button {
            background: white;
            color: #ff4757;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: transform 0.2s;
        }
        
        .appeal-button:hover {
            transform: scale(1.05);
        }
        
        /* –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #f5f7fa;
            opacity: 0.7;
            filter: grayscale(50%);
        }
        
        .message-date {
            text-align: center;
            color: #999;
            font-size: 12px;
            margin: 10px 0;
            position: relative;
        }
        
        .message-date::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 1px;
            background: #eee;
            z-index: 1;
        }
        
        .message-date span {
            background: #f5f7fa;
            padding: 0 10px;
            position: relative;
            z-index: 2;
        }
        
        .message {
            max-width: 70%;
            display: flex;
            gap: 10px;
        }
        
        .message.incoming {
            align-self: flex-start;
        }
        
        .message.outgoing {
            align-self: flex-end;
            flex-direction: row-reverse;
            opacity: 0.5;
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
            margin-top: auto;
        }
        
        .message-content {
            display: flex;
            flex-direction: column;
            gap: 5px;
            max-width: 100%;
        }
        
        .message-bubble {
            padding: 12px 15px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
            line-height: 1.4;
            font-size: 14px;
        }
        
        .message.incoming .message-bubble {
            background: white;
            border-top-left-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .message.outgoing .message-bubble {
            background: #ccc;
            color: #666;
            border-top-right-radius: 5px;
            position: relative;
        }
        
        .message.outgoing .message-bubble::after {
            content: 'üîá';
            position: absolute;
            right: 5px;
            top: 5px;
            font-size: 12px;
        }
        
        .message-time {
            font-size: 11px;
            color: #999;
            align-self: flex-end;
        }
        
        .message.outgoing .message-time {
            color: rgba(102, 102, 102, 0.8);
        }
        
        .message-sender {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }
        
        .message.incoming .message-sender {
            color: #667eea;
        }
        
        .system-message {
            align-self: center;
            background: rgba(255, 71, 87, 0.1);
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 12px;
            color: #ff4757;
            margin: 10px 0;
            max-width: 80%;
            text-align: center;
            border: 1px solid rgba(255, 71, 87, 0.2);
        }
        
        /* –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞) */
        .input-container {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            position: sticky;
            bottom: 0;
            z-index: 100;
            border-top: 2px solid #ff4757;
        }
        
        .input-actions {
            display: flex;
            gap: 10px;
        }
        
        .input-action {
            background: none;
            border: none;
            font-size: 20px;
            color: #ccc;
            cursor: not-allowed;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #eee;
            border-radius: 25px;
            font-size: 14px;
            resize: none;
            max-height: 120px;
            min-height: 20px;
            line-height: 1.4;
            background: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }
        
        .message-input::placeholder {
            color: #999;
        }
        
        .send-button {
            background: #ccc;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: not-allowed;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ */
        .block-info {
            background: white;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .info-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #666;
        }
        
        .info-icon {
            color: #ff4757;
            font-size: 16px;
        }
        
        .countdown {
            background: rgba(255, 71, 87, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
        }
        
        .countdown-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .countdown-timer {
            font-size: 24px;
            font-weight: 700;
            color: #ff4757;
            font-family: monospace;
        }
        
        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            position: sticky;
            bottom: 0;
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #666;
            transition: color 0.2s;
            flex: 1;
            max-width: 80px;
        }
        
        .nav-item.active {
            color: #667eea;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 5px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .nav-item.active .nav-icon {
            background: rgba(102, 126, 234, 0.1);
        }
        
        .nav-label {
            font-size: 11px;
            font-weight: 500;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–ø–µ–ª–ª—è—Ü–∏–∏ */
        .appeal-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .appeal-modal.active {
            display: flex;
        }
        
        .appeal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .appeal-title {
            font-weight: 600;
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }
        
        .appeal-text {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        .appeal-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 14px;
            min-height: 150px;
            resize: vertical;
            margin-bottom: 20px;
        }
        
        .appeal-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .appeal-buttons {
            display: flex;
            gap: 10px;
        }
        
        .appeal-submit {
            flex: 1;
            background: #667eea;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .appeal-cancel {
            flex: 1;
            background: #f8f9fa;
            color: #333;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
        }
        
        @media (max-width: 480px) {
            .chat-header {
                padding: 12px 15px;
            }
            
            .messages-container {
                padding: 15px;
            }
            
            .input-container {
                padding: 12px 15px;
            }
            
            .message {
                max-width: 85%;
            }
            
            .mute-banner {
                padding: 15px;
            }
            
            .appeal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="chat-header">
        <button class="back-button" onclick="window.location.href='family-main.html'">‚Üê</button>
        
        <div class="community-icon">üîá</div>
        
        <div class="chat-info">
            <div class="chat-name">
                –ú–æ–π –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç
                <span class="muted-badge-large">–†–û–¢ –ó–ê–ö–†–´–¢</span>
            </div>
            <div class="chat-status">
                <span>üîá –í—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–º —á–∞—Ç–µ</span>
            </div>
        </div>
        
        <div class="header-actions">
            <div class="header-action" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" onclick="showBlockInfo()">‚ìò</div>
        </div>
    </div>
    
    <!-- –ë–∞–Ω–Ω–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ -->
    <div class="mute-banner">
        <div class="mute-icon">ü§ê</div>
        <div class="mute-title">–í–∞–º –∑–∞–∫—Ä—ã–ª–∏ —Ä–æ—Ç –≤ —ç—Ç–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ</div>
        <div class="mute-reason">
            –ü—Ä–∏—á–∏–Ω–∞: <strong>–°–ø–∞–º –≤ —á–∞—Ç–µ</strong>
        </div>
        <div class="mute-details">
            –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–≥—Ä–∞–Ω–∏—á–∏–ª –≤–∞—à—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
        </div>
        <button class="appeal-button" onclick="openAppealModal()">
            –ü–æ–¥–∞—Ç—å –∞–ø–µ–ª–ª—è—Ü–∏—é
        </button>
    </div>
    
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ -->
    <div class="block-info" id="blockInfo" style="display: none;">
        <div class="info-title">
            <span>‚ìò</span>
            <span>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ</span>
        </div>
        
        <div class="info-list">
            <div class="info-item">
                <span class="info-icon">üë§</span>
                <span>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: <strong>–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</strong></span>
            </div>
            <div class="info-item">
                <span class="info-icon">‚è∞</span>
                <span>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: <strong>–°–µ–≥–æ–¥–Ω—è –≤ 10:30</strong></span>
            </div>
            <div class="info-item">
                <span class="info-icon">üìù</span>
                <span>–ü—Ä–∏—á–∏–Ω–∞: <strong>–°–ø–∞–º –≤ —á–∞—Ç–µ</strong></span>
            </div>
            <div class="info-item">
                <span class="info-icon">üîí</span>
                <span>–¢–∏–ø –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: <strong>–¢–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</strong></span>
            </div>
        </div>
        
        <div class="countdown">
            <div class="countdown-title">–î–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å—Ç–∞–ª–æ—Å—å:</div>
            <div class="countdown-timer" id="countdownTimer">23:59:59</div>
        </div>
    </div>
    
    <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div class="messages-container" id="messagesContainer">
        <div class="message-date">
            <span>–°–µ–≥–æ–¥–Ω—è</span>
        </div>
        
        <div class="system-message">
            üîá <strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–∫—Ä—ã–ª –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —ç—Ç–æ–º —á–∞—Ç–µ</strong>
        </div>
        
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞) -->
    <div class="input-container">
        <div class="input-actions">
            <button class="input-action" disabled>üìé</button>
            <button class="input-action" disabled>üòä</button>
        </div>
        
        <textarea 
            class="message-input" 
            id="messageInput" 
            placeholder="–†–æ—Ç –∑–∞–∫—Ä—ã—Ç ü§ê" 
            rows="1"
            disabled
        ></textarea>
        
        <button class="send-button" disabled>‚û§</button>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–ø–µ–ª–ª—è—Ü–∏–∏ -->
    <div class="appeal-modal" id="appealModal">
        <div class="appeal-content">
            <div class="appeal-title">–ü–æ–¥–∞—á–∞ –∞–ø–µ–ª–ª—è—Ü–∏–∏</div>
            <div class="appeal-text">
                –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ø–µ–ª–ª—è—Ü–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–æ–æ–±—â–µ—Å—Ç–≤–∞. 
                –û–ø–∏—à–∏—Ç–µ, –ø–æ—á–µ–º—É –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–π, –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç –≤–∞—à –∑–∞–ø—Ä–æ—Å.
            </div>
            <textarea 
                class="appeal-textarea" 
                id="appealText" 
                placeholder="–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –ø–æ–¥—Ä–æ–±–Ω–æ... –ù–∞–ø—Ä–∏–º–µ—Ä: '–Ø –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Ç–µ–º–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ –Ω–µ –∑–∞–Ω–∏–º–∞–ª—Å—è —Å–ø–∞–º–æ–º...'"
            ></textarea>
            <div class="appeal-buttons">
                <button class="appeal-cancel" onclick="closeAppealModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="appeal-submit" onclick="submitAppeal()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ø–µ–ª–ª—è—Ü–∏—é</button>
            </div>
        </div>
    </div>
    
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <a href="main-hub.html" class="nav-item">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </a>
        
        <a href="vastapae-feed.html" class="nav-item">
            <div class="nav-icon">üì±</div>
            <div class="nav-label">VASTAPAE</div>
        </a>
        
        <a href="friends-list.html" class="nav-item">
            <div class="nav-icon">üë•</div>
            <div class="nav-label">FRIEND</div>
        </a>
        
        <a href="reels-feed.html" class="nav-item">
            <div class="nav-icon">üé¨</div>
            <div class="nav-label">REELS</div>
        </a>
        
        <a href="family-main.html" class="nav-item">
            <div class="nav-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
            <div class="nav-label">FAMILY</div>
        </a>
    </nav>
    
    <script>
        // –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
        let messages = [
            { id: 1, text: "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö—Ç–æ –∏–¥–µ—Ç –Ω–∞ –ª–µ–∫—Ü–∏—é –≤ 10:00?", sender: "–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞", initial: "–ê–°", time: "09:15", type: "incoming" },
            { id: 2, text: "–Ø –±—É–¥—É —Ç–∞–º. –ì–æ–≤–æ—Ä—è—Ç, –±—É–¥–µ—Ç –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —ç–∫–∑–∞–º–µ–Ω–∞–º", sender: "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", initial: "–ò–ü", time: "09:17", type: "incoming" },
            { id: 3, text: "–†–ï–ö–õ–ê–ú–ê!!! –ö—É–ø–∏—Ç–µ –º–æ–∏ –∫—É—Ä—Å—ã! –†–ï–ö–õ–ê–ú–ê!!!", sender: "–í—ã", initial: "–Ø", time: "09:18", type: "outgoing" },
            { id: 4, text: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ —Ä–µ–∫–ª–∞–º—É –≤ —á–∞—Ç–µ", sender: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", initial: "–ê–î", time: "09:19", type: "incoming" },
            { id: 5, text: "–ï–©–ï –ë–û–õ–¨–®–ï –†–ï–ö–õ–ê–ú–´!!! –ö–£–ü–ò–¢–ï –í–°–ï!!!", sender: "–í—ã", initial: "–Ø", time: "09:20", type: "outgoing" },
            { id: 6, text: "–Ø —Ç–æ–∂–µ –ø—Ä–∏–¥—É. –ö—Ç–æ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã –∑–∞ –ø—Ä–æ—à–ª—É—é –ª–µ–∫—Ü–∏—é —Å—Ñ–æ—Ç–∫–∞–ª?", sender: "–î–º–∏—Ç—Ä–∏–π –ö–æ–∑–ª–æ–≤", initial: "–î–ö", time: "09:20", type: "incoming" },
            { id: 7, text: "üîá –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–∫—Ä—ã–ª —Ä–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –°–ø–∞–º–µ—Ä", sender: "system", initial: "", time: "09:21", type: "system" },
            { id: 8, text: "–£ –º–µ–Ω—è –µ—Å—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç—ã, –º–æ–≥—É —Å–∫–∏–Ω—É—Ç—å", sender: "–ú–∞—Ä–∏—è –í–æ–ª–∫–æ–≤–∞", initial: "–ú–í", time: "09:22", type: "incoming" },
            { id: 9, text: "–ü–æ–ø—Ä–æ–±—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ...", sender: "–í—ã", initial: "–Ø", time: "09:25", type: "outgoing" },
            { id: 10, text: "–ï—â–µ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ...", sender: "–í—ã", initial: "–Ø", time: "09:26", type: "outgoing" }
        ];
        
        // –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
        let countdownTime = 24 * 60 * 60; // 24 —á–∞—Å–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            renderMessages();
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            startCountdown();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            checkMuteStatus();
            
            // –°–∏–º—É–ª—è—Ü–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            simulateIncomingMessages();
        });
        
        function renderMessages() {
            const container = document.getElementById('messagesContainer');
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–¥–∞—Ç–∞)
            const existingMessages = container.querySelectorAll('.message, .system-message');
            existingMessages.forEach(msg => {
                if (!msg.classList.contains('message-date') && !msg.id) {
                    msg.remove();
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            messages.forEach(msg => {
                if (msg.type === 'system') {
                    const systemMsg = document.createElement('div');
                    systemMsg.className = 'system-message';
                    systemMsg.innerHTML = msg.text;
                    container.appendChild(systemMsg);
                } else {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${msg.type}`;
                    
                    messageDiv.innerHTML = `
                        <div class="message-avatar">${msg.initial}</div>
                        <div class="message-content">
                            ${msg.type === 'incoming' ? `<div class="message-sender">${msg.sender}</div>` : ''}
                            <div class="message-bubble">${msg.text}</div>
                            <div class="message-time">${msg.time}</div>
                        </div>
                    `;
                    
                    container.appendChild(messageDiv);
                }
            });
            
            // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑
            container.scrollTop = container.scrollHeight;
        }
        
        function startCountdown() {
            const timerElement = document.getElementById('countdownTimer');
            
            function updateTimer() {
                const hours = Math.floor(countdownTime / 3600);
                const minutes = Math.floor((countdownTime % 3600) / 60);
                const seconds = countdownTime % 60;
                
                timerElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (countdownTime > 0) {
                    countdownTime--;
                    setTimeout(updateTimer, 1000);
                } else {
                    timerElement.textContent = "00:00:00";
                    checkMuteStatus(); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–Ω—è–ª–∏ –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
                }
            }
            
            updateTimer();
        }
        
        function checkMuteStatus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ localStorage
            const isMuted = localStorage.getItem('user_muted') === 'true';
            
            if (!isMuted) {
                // –ï—Å–ª–∏ –º—É—Ç —Å–Ω—è—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
                setTimeout(() => {
                    alert('–í–∞–º –æ—Ç–∫—Ä—ã–ª–∏ —Ä–æ—Ç! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.');
                    window.location.href = 'community-chat.html';
                }, 1000);
            }
        }
        
        function simulateIncomingMessages() {
            setInterval(() => {
                if (Math.random() > 0.8 && messages.length < 20) {
                    const incomingMessages = [
                        { text: "–ö—Ç–æ-–Ω–∏–±—É–¥—å –±—ã–ª –Ω–∞ –≤—á–µ—Ä–∞—à–Ω–µ–º —Å–µ–º–∏–Ω–∞—Ä–µ?", sender: "–ï–ª–µ–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞", initial: "–ï–°" },
                        { text: "–î–∞, —Ç–∞–º –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏", sender: "–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤", initial: "–°–ò" },
                        { text: "–ú–æ–∂–µ—Ç–µ –∫—Ä–∞—Ç–∫–æ –ø–µ—Ä–µ—Å–∫–∞–∑–∞—Ç—å?", sender: "–û–ª—å–≥–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞", initial: "–û–ö" },
                        { text: "–ö—Å—Ç–∞—Ç–∏, –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–µ–∫—Ü–∏—è", sender: "–ê–ª–µ–∫—Å–µ–π –ù–æ–≤–∏–∫–æ–≤", initial: "–ê–ù" }
                    ];
                    
                    const randomMessage = incomingMessages[Math.floor(Math.random() * incomingMessages.length)];
                    const now = new Date();
                    const time = now.getHours().toString().padStart(2, '0') + ':' + 
                                now.getMinutes().toString().padStart(2, '0');
                    
                    const newMessage = {
                        id: messages.length + 1,
                        text: randomMessage.text,
                        sender: randomMessage.sender,
                        initial: randomMessage.initial,
                        time: time,
                        type: 'incoming'
                    };
                    
                    messages.push(newMessage);
                    renderMessages();
                }
            }, 30000);
        }
        
        function showBlockInfo() {
            const blockInfo = document.getElementById('blockInfo');
            blockInfo.style.display = blockInfo.style.display === 'none' ? 'block' : 'none';
        }
        
        function openAppealModal() {
            document.getElementById('appealModal').classList.add('active');
        }
        
        function closeAppealModal() {
            document.getElementById('appealModal').classList.remove('active');
        }
        
        function submitAppeal() {
            const appealText = document.getElementById('appealText').value.trim();
            
            if (appealText.length < 10) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)');
                return;
            }
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            alert('–í–∞—à–∞ –∞–ø–µ–ª–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É. –í—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.');
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAppealModal();
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
            document.getElementById('appealText').value = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
            const container = document.getElementById('messagesContainer');
            const systemMsg = document.createElement('div');
            systemMsg.className = 'system-message';
            systemMsg.textContent = 'üì® –í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∞–ø–µ–ª–ª—è—Ü–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É';
            container.appendChild(systemMsg);
            container.scrollTop = container.scrollHeight;
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ "–º—É—Ç–∞" –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        window.addEventListener('storage', function(e) {
            if (e.key === 'user_muted' && e.newValue === 'false') {
                alert('–í–∞–º –æ—Ç–∫—Ä—ã–ª–∏ —Ä–æ—Ç! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –æ–±—ã—á–Ω—ã–π —á–∞—Ç...');
                setTimeout(() => {
                    window.location.href = 'community-chat.html';
                }, 2000);
            }
        });
        
        // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–µ–º–æ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É)
        document.getElementById('messageInput').addEventListener('focus', function() {
            alert('–í—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–º —á–∞—Ç–µ –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.');
        });
    </script>
</body>
</html>